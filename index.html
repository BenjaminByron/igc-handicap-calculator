<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <title>IGC Handicap Calculator</title>
</head>
<body>
    <h1>IGC Handicap Calculator</h1>
    <h5>Select Glider Type</h3>
</body>
</html>



<script>
// Script below runs the calculation  //

{
var glider = {
    gliderType: "ASW 20f",
    baseHandicap: 1.055,
    referenceMass: 372,
    emptyWeight: 276,
    pilotWeight: 104,
    winglets: true,
      }
    }

if (glider.winglets) { // Adjusts base handicap for winglets, if applicable
        glider.baseHandicap += 0.004;
    }

function flyingWeight(w1, w2) { // Function to determine glider's takeoff weight
          return w1 + w2;
      }
    var pilotAndGlider = flyingWeight(glider.emptyWeight, glider.pilotWeight); // Calculate glider's takeoff weight

function calculateRemainder(w1, w2) {
          return w1 - w2;
      }
    var remainder = calculateRemainder(pilotAndGlider, glider.referenceMass); // Number of kg over (+ve) or under (-ve) reference mass

    var useBaseHandicap = (remainder > -10) && (remainder <= 0); // Establishes whether handicap is in no-adjustment range

var calculatedHandicap;
var upwardAdjustment = 0
var downwardAdjustment = 0;

if (useBaseHandicap) { // Assigns no-adjustment handicap
    calculatedHandicap = glider.baseHandicap;
}

else if (remainder > 0) { // Calculates and assigns increased handicap
    upwardAdjustment = Math.ceil(remainder/10) * 0.004;
    calculatedHandicap = glider.baseHandicap + upwardAdjustment;
}

else if (!useBaseHandicap) {  // Calculates decreaased handicap
    downwardAdjustment = Math.ceil(remainder/10) * -0.003;
}

if (downwardAdjustment >= 0.006) { // Sets lower handicap limit
    calculatedHandicap = glider.baseHandicap - 0.006;
}

else  {// Assigns decreased handicap
    calculatedHandicap = glider.baseHandicap - downwardAdjustment;
}

console.log(calculatedHandicap.toFixed(3));

</script>
</div>
<div class="col-lg-8 col-lg-offset-2 col-sm-10 col-sm-offset-1 col-xs-12" id="footer">
<p>Created by <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Ben Hughes</a></p>
</div>
</html>
